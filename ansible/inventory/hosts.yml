---
# =============================================================================
# ARQUIVO DE INVENTÁRIO - OpenShift Health Check
# =============================================================================
# Este arquivo define os hosts onde o health check será executado.
#
# IMPORTANTE: Ajuste as variáveis obrigatórias abaixo antes de executar:
#   - openshift_cluster_url: URL do API Server do cluster
#   - openshift_token: Token de autenticação (obtenha com: oc whoami -t)
#   - cluster_name: Nome do cluster (usado para organizar relatórios)
#
# =============================================================================

all:
  children:
    # ========================================================================
    # EXECUÇÃO LOCAL (Recomendado)
    # ========================================================================
    # O playbook roda na máquina local e conecta diretamente ao cluster
    # ========================================================================
    localhost:
      hosts:
        localhost:
          ansible_connection: local
          ansible_python_interpreter: "{{ ansible_playbook_python }}"
          
          # ================================================================
          # CONFIGURAÇÕES OBRIGATÓRIAS - AJUSTE AQUI
          # ================================================================
          
          # URL do API Server do cluster OpenShift
          # Formato: https://api.<cluster-name>.<domain>:6443
          # Obtenha com: oc cluster-info
          # Exemplo: https://api.production.example.com:6443
          openshift_cluster_url: "https://api.cluster.example.com:6443"
          
          # Token de autenticação do OpenShift
          # Obtenha com: oc whoami -t
          # Formato: sha256~<token>
          openshift_token: "sha256~seu-token-aqui"
          
          # Usuário do OpenShift (obrigatório para gerar kubeconfig)
          # Obtenha com: oc whoami
          openshift_username: "seu-usuario-aqui"
          
          # Nome do cluster (usado para organizar relatórios)
          # Este nome aparecerá nos relatórios gerados
          # Exemplo: production-cluster, staging-cluster, etc.
          cluster_name: "openshift-cluster"
          
          # ================================================================
          # CONFIGURAÇÕES OPCIONAIS
          # ================================================================
          
          # Caminho para o arquivo kubeconfig (alternativa ao token)
          # Se especificado, o token será ignorado
          # openshift_kubeconfig: "~/.kube/config"
          
          # Contexto do Kubernetes a ser usado (se usando kubeconfig)
          # openshift_context: "production/context-name"
          
    # ========================================================================
    # MÚLTIPLOS CLUSTERS (Descomente e configure seus clusters)
    # ========================================================================
    # Use esta seção para configurar múltiplos clusters
    # Execute em todos: --limit openshift_clusters
    # Execute em um específico: --limit production-cluster
    # ========================================================================
    # openshift_clusters:
    #   hosts:
    #     # Cluster de Produção
    #     production-cluster:
    #       ansible_host: localhost
    #       ansible_connection: local
    #       ansible_python_interpreter: "{{ ansible_playbook_python }}"
    #       openshift_cluster_url: "https://api.production.example.com:6443"
    #       openshift_token: "sha256~token-producao-aqui"
    #       cluster_name: "production-cluster"
    #       
    #     # Cluster de Staging
    #     staging-cluster:
    #       ansible_host: localhost
    #       ansible_connection: local
    #       ansible_python_interpreter: "{{ ansible_playbook_python }}"
    #       openshift_cluster_url: "https://api.staging.example.com:6443"
    #       openshift_token: "sha256~token-staging-aqui"
    #       cluster_name: "staging-cluster"
    #       
    #     # Cluster de Desenvolvimento
    #     development-cluster:
    #       ansible_host: localhost
    #       ansible_connection: local
    #       ansible_python_interpreter: "{{ ansible_playbook_python }}"
    #       openshift_cluster_url: "https://api.dev.example.com:6443"
    #       openshift_token: "sha256~token-dev-aqui"
    #       cluster_name: "development-cluster"

# =============================================================================
# EXEMPLOS DE USO
# =============================================================================
#
# 1. Execução usando variáveis do inventário:
#    ansible-playbook -i inventory/hosts.yml playbooks/openshift_health_check.yml
#
# 2. Execução sobrescrevendo variáveis via linha de comando:
#    ansible-playbook -i inventory/hosts.yml playbooks/openshift_health_check.yml \
#      -e cluster_url="https://api.cluster.example.com:6443" \
#      -e cluster_token="sha256~token-aqui" \
#      -e cluster_name="meu-cluster"
#
# 3. Execução com tags específicas (apenas segurança):
#    ansible-playbook -i inventory/hosts.yml playbooks/openshift_health_check.yml \
#      -e cluster_url="https://api.cluster.example.com:6443" \
#      -e cluster_token="sha256~token-aqui" \
#      --tags seguranca
#
# 4. Execução em modo de verificação (dry-run):
#    ansible-playbook -i inventory/hosts.yml playbooks/openshift_health_check.yml \
#      -e cluster_url="https://api.cluster.example.com:6443" \
#      -e cluster_token="sha256~token-aqui" \
#      --check
#
# 5. Execução em múltiplos clusters (descomente a seção openshift_clusters acima):
#    # Em todos os clusters:
#    ansible-playbook -i inventory/hosts.yml playbooks/openshift_health_check.yml \
#      --limit openshift_clusters
#    
#    # Em um cluster específico:
#    ansible-playbook -i inventory/hosts.yml playbooks/openshift_health_check.yml \
#      --limit production-cluster
#    
#    # Em paralelo (mais rápido):
#    ansible-playbook -i inventory/hosts.yml playbooks/openshift_health_check.yml \
#      --limit openshift_clusters --forks 5
#
# =============================================================================
# NOTAS IMPORTANTES
# =============================================================================
#
# - O token OpenShift pode ser obtido com: oc whoami -t
# - O token geralmente começa com "sha256~"
# - Para produção, considere usar Ansible Vault para proteger tokens
# - O cluster_name será usado para nomear os diretórios de relatórios
# - Relatórios serão salvos em: reports/{cluster_name}_{timestamp}/
# - Variáveis passadas via -e têm prioridade sobre o inventário
#
# =============================================================================
