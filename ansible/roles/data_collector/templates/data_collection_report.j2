# Verificação de Saúde OpenShift - Relatório de Coleta de Dados

## Resumo da Coleta

**Timestamp da Coleta:** {{ consolidated_data.collection_summary.timestamp }}  
**URL do Cluster:** {{ consolidated_data.collection_summary.cluster_url }}  
**Comando CLI:** {{ consolidated_data.collection_summary.cli_command }}  
**Host de Coleta:** {{ consolidated_data.collection_summary.collection_host }}  
**Versão do Ansible:** {{ consolidated_data.collection_summary.ansible_version }}  

## Status da Coleta

| Componente | Status | Arquivo |
|------------|--------|---------|
| Informações do Cluster | {{ '✓ Sucesso' if consolidated_data.data_files.cluster_info else '✗ Falhou' }} | {{ consolidated_data.data_files.cluster_info or 'N/A' }} |
| Nós | {{ '✓ Sucesso' if consolidated_data.data_files.nodes else '✗ Falhou' }} | {{ consolidated_data.data_files.nodes or 'N/A' }} |
| Namespaces | {{ '✓ Sucesso' if consolidated_data.data_files.namespaces else '✗ Falhou' }} | {{ consolidated_data.data_files.namespaces or 'N/A' }} |
| Pods | {{ '✓ Sucesso' if consolidated_data.data_files.pods else '✗ Falhou' }} | {{ consolidated_data.data_files.pods or 'N/A' }} |
| Serviços | {{ '✓ Sucesso' if consolidated_data.data_files.services else '✗ Falhou' }} | {{ consolidated_data.data_files.services or 'N/A' }} |
| Deployments | {{ '✓ Sucesso' if consolidated_data.data_files.deployments else '✗ Falhou' }} | {{ consolidated_data.data_files.deployments or 'N/A' }} |
| RBAC | {{ '✓ Sucesso' if consolidated_data.data_files.rbac else '✗ Falhou' }} | {{ consolidated_data.data_files.rbac or 'N/A' }} |
| Configurações de Segurança | {{ '✓ Sucesso' if consolidated_data.data_files.security_configs else '✗ Falhou' }} | {{ consolidated_data.data_files.security_configs or 'N/A' }} |
| Operadores | {{ '✓ Sucesso' if consolidated_data.data_files.operators else '✗ Falhou' }} | {{ consolidated_data.data_files.operators or 'N/A' }} |
| Métricas | {{ '✓ Sucesso' if consolidated_data.data_files.metrics else '✗ Falhou' }} | {{ consolidated_data.data_files.metrics or 'N/A' }} |
| Eventos | {{ '✓ Sucesso' if consolidated_data.data_files.events else '✗ Falhou' }} | {{ consolidated_data.data_files.events or 'N/A' }} |

## Estatísticas da Coleta

{% set success_count = 0 %}
{% set total_count = 0 %}
{% for key, value in consolidated_data.data_files.items() %}
{% set total_count = total_count + 1 %}
{% if value %}
{% set success_count = success_count + 1 %}
{% endif %}
{% endfor %}

**Total de Componentes:** {{ total_count }}  
**Coletas Bem-sucedidas:** {{ success_count }}  
**Coletas Falharam:** {{ total_count - success_count }}  
**Taxa de Sucesso:** {{ ((success_count / total_count) * 100) | round(2) }}%  

## Localização dos Arquivos de Dados

Todos os arquivos de dados coletados estão armazenados em: `{{ data_output_dir }}`

## Próximos Passos

Os dados coletados serão processados pelos roles de análise:
- Analisador de Arquitetura
- Analisador de Segurança  
- Analisador de Melhores Práticas
- Otimizador de Recursos

## Notas

{% if success_count < total_count %}
⚠️ **Aviso:** Algumas tarefas de coleta de dados falharam. A análise pode estar incompleta.
{% else %}
✅ **Sucesso:** Todas as tarefas de coleta de dados foram concluídas com sucesso.
{% endif %}

Este relatório foi gerado automaticamente pelo playbook de Verificação de Saúde OpenShift do Ansible.
